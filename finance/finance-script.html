<script>

  function startTableFinance() {
    $("#proektfin-datalist").empty();
    google.script.run.withSuccessHandler((arrayOfArrays) => {
      afterDropDownReturned(arrayOfArrays, 'proektfin-datalist')
    }).getDropDownArrayProekt();

    $("#sffin-datalist").empty();
    google.script.run.withSuccessHandler((arrayOfArrays) => {
      afterDropDownReturned(arrayOfArrays, 'sffin-datalist')
    }).getDropDownArraySfFin()

    $("#primfin-datalist").empty();
    google.script.run.withSuccessHandler((arrayOfArrays) => {
      afterDropDownReturned(arrayOfArrays, 'primfin-datalist')
    }).getDropDownArrayPrimFin()

    $("#firmafin-datalist").empty();
    google.script.run.withSuccessHandler((arrayOfArrays) => {
      afterDropDownReturned(arrayOfArrays, 'firmafin-datalist')
    }).getDropDownArrayFirma()

    $("#priznakfin-datalist").empty();
    google.script.run.withSuccessHandler((arrayOfArrays) => {
      afterDropDownReturned(arrayOfArrays, 'priznakfin-datalist')
    }).getDropDownArrayPriznak()
  }

  function array(ar) {
    var row_number_fin = 0;
    let naydenofin = 0

    ar.forEach(function (item) {
      naydenofin += item[1] * 1
    })
    const ro = new Intl.NumberFormat('ru-RU', { minimumFractionDigits: 2 }).format(naydenofin)

    if (naydenofin) {
      naydenofin = "Сумма: " + ro + " грн."
    } else {
      "Нет данных"
    }

    var displayTable = '<form>';
    displayTable += '<table onkeypress=\"clickPressFinanceUpdate(event)\" class=\"table table-bordered border-danger mb-2 mt-2\" id=\"mainTableFin\" >';
    displayTable += "<tr>";
    displayTable += "<th>" + naydenofin + "</th>";

    displayTable += "</tr>";

    ar.forEach(function (item, index) {

      displayTable += "<tr class=\"radius\" id=\"ROWNUMBER:" + row_number_fin + "\" >";

      displayTable += "<td>"
      displayTable += "<div class=\"row\">"

      displayTable += "<div class=\"col-md-2\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_proektfin\">Проект</label>  ";
      displayTable += "<input type=\"text\" id=\"up_proektfin" + row_number_fin + "\" value=\"" + item[0] + "\" class=\"form-control form-control-sm form-font\" /></div></div> ";

      displayTable += "<div class=\"col-md-2\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_summafin\">Сумма</label> ";
      displayTable += "<input type=\"number\" id=\"up_summafin" + row_number_fin + "\" value=\"" + item[1] + "\" class=\"form-control form-control-sm\" /></div></div> ";

      displayTable += "<div class=\"col-md-1\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_priznakfin\">Признак</label> ";
      displayTable += "<input  type=\"text\" list=\"priznakfin-datalist\" id=\"up_priznakfin" + row_number_fin + "\" value=\"" + item[2] + "\" class=\"form-control form-control-sm\" /><datalist id=\"priznakfin-datalist\"></datalist></div></div> ";

      displayTable += "<div class=\"col-md-2\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_dateoplfin\">Дата оплаты</label> ";
      displayTable += "<input type=\"date\" id=\"up_dateoplfin" + row_number_fin + "\" value=\"" + formatDateYYYYtireMMtireDD(strongToDate(item[3])) + "\" class=\"form-control form-control-sm\" /></div></div> ";

      displayTable += "<div class=\"col-md-2\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_sffin\">Сф</label> ";
      displayTable += "<input type=\"text\" id=\"up_sffin" + row_number_fin + "\" value=\"" + item[4] + "\" class=\"form-control form-control-sm\" /></div></div> ";

      displayTable += "<div class=\"col-md-3\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_primfin\">Примечание</label> ";
      displayTable += "<input type=\"text\"  list=\"primfin-datalist\" id=\"up_primfin" + row_number_fin + "\" value=\"" + item[5] + "\" class=\"form-control form-control-sm\" /><datalist id=\"primfin-datalist\"></datalist> </div></div> ";

      displayTable += "<div class=\"col-md-1 delete-fin\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_idfin\">ID</label> ";
      displayTable += "<input type=\"number\" id=\"up_idfin" + row_number_fin + "\" value=\"" + item[6] + "\" class=\"form-control form-control-sm\" /></div></div> ";

      displayTable += "<div class=\"col-md-4 delete-fin\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_firmafin\">Фирма</label> ";
      displayTable += "<input type=\"text\" disabled id=\"up_firmafin" + row_number_fin + "\" value=\"" + item[7] + "\" class=\"form-control form-control-sm\" /></div></div> ";

      displayTable += "<div class=\"col-md-2 delete-fin\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_sumispolfin\">Сумма исполу</label> ";
      displayTable += "<input type=\"text\" id=\"up_sumispolfin" + row_number_fin + "\" value=\"" + item[8] + "\" class=\"form-control form-control-sm\" /></div></div> ";

      displayTable += "<div class=\"col-md-2 delete-fin\">"
      displayTable += "<div class=\"form-label\">"
      displayTable += "<label for=\"up_v\">Оплата исполу</label> ";
      displayTable += "<input type=\"text\" id=\"up_oplataispolfin" + row_number_fin + "\" value=\"" + item[9] + "\" class=\"form-control form-control-sm\" /></div></div> ";


      displayTable += "<div class=\"col-md-1\">"
      displayTable += "<div class=\"form-label\">"

      displayTable += "<input type=\"button\" id=\"update_button_fin" + row_number_fin + "\" value=\"Update\" class=\"btn btn-danger delete-fin btn-update-fin\" /></div></div> ";
      displayTable += "<div></div> ";

      displayTable += `
            <div class="row checkbox-finance">     
              <div class="col-md-auto">
                <div class="form-check">
                  <span class="check-style"></span>
                  <label for="issuepartfinance1" class="form-check-label" >Выставлено частично</label>
                  <input type="checkbox" id="issuepartfinance1" class="form-check-input" value="part"/>
                </div>  
              </div>
              <div class="col-md-auto">
                <div class="form-check">
                  <span class="check-style"></span>
                  <label for="issuecompletfinance1" class="form-check-label" >Выставлено полностью</label>
                  <input type="checkbox" id="issuecompletfinance1" class="form-check-input" value="complet"/>
                </div>  
              </div>
            </div>
          `;

      displayTable += "</tr>";
      row_number_fin++;
    });

    displayTable += '</table></form>';

    document.getElementById("rowdatafin").innerHTML = displayTable;
    localStorage.setItem('test', displayTable);
    doubleCheck();
    updateRecordFinButton();
    $('#btnSearchFinance').prop("disabled", false);
    //  $("#rowdatafin").attr("tabindex",-1).focus();

  }

  // cрабатывание по кнопке Enter
  function clickPressFinance(event) {
    if (event.keyCode == 13) {
      SearchRecordsFin();
    }
  }

  function clickPressFinanceModal(event) {
    if (event.keyCode == 13) {
      btnSaveModalFinance();
    }
  }

  function clickPressFinanceUpdate(event) {
    if (event.keyCode == 13) {
      UpdateRecordFin(parseInt(document.activeElement.id.replace(/[^\d]/g, '')));
    }
  }

  // отмена cрабатывания по кнопке Enter в поле поиска
  function clickPressFinanceShearh(event) {
    if (event.keyCode == 13) {
      event.preventDefault();
      return false;
    }
  }

  function SearchRecordsFin(valSfFin) {
    var proektFin = document.getElementById("proektfin").value;
    var summaFin = document.getElementById("summafin").value;
    var sfFin = document.getElementById("sffin").value;;
    var priznakFin = document.getElementById("priznakfin").value;
    var dateoplFin = document.getElementById("dateoplfin").value;
    var primFin = document.getElementById("primfin").value;
    var idFin = document.getElementById("idfin").value;
    var firmaFin = document.getElementById("firmafin").value;
    if (valSfFin) {
      var sfFin = valSfFin;
    }

    // остановка скриипта, если не выбраны критерии поиска в инпутах (используется сторонняя функция)
    const dataArr =
      [
        proektFin, summaFin, priznakFin, dateoplFin, sfFin, primFin, idFin, firmaFin
      ]

    if (searchStop(dataArr)) {
      alert('Не введены данные')
      $('#btnSearchFinance').prop("disabled", false);
      return;
    }
    spinner('rowdatafin')
    google.script.run.withSuccessHandler(array).searchRecordsFin(proektFin, summaFin, priznakFin, dateoplFin, sfFin, primFin, idFin, firmaFin);
  }

  function SearchRecordsFinProekt1(proektFin) {

    var summaFin = ""
    var priznakFin = ""
    var dateoplFin = ""
    var sfFin = ""
    var primFin = ""
    var idFin = ""
    var firmaFin = ""
    //  spinner('rowdatafin')


    google.script.run.withSuccessHandler(array).searchRecordsFinProekt(proektFin, summaFin, priznakFin, dateoplFin, sfFin, primFin, idFin, firmaFin);

  }

  function SearchRecordsFinProekt() {
    var proektFin = document.getElementById("proektfin").value;
    spinner('rowdatafin')
    SearchRecordsFinProekt1(proektFin)
  }


  /*     function SearchRecordsFinProekt(){
        var proektFin = document.getElementById("proektfin").value;
        var summaFin = document.getElementById("summafin").value;
        var priznakFin = document.getElementById("priznakfin").value;
        var dateoplFin = document.getElementById("dateoplfin").value;
        var sfFin = document.getElementById("sffin").value;
        var primFin = document.getElementById("primfin").value;
        var idFin = document.getElementById("idfin").value;
        var firmaFin = document.getElementById("firmafin").value;
        spinner('rowdatafin')
  
        google.script.run.withSuccessHandler(array).searchRecordsFinProekt(proektFin, summaFin, priznakFin, dateoplFin, sfFin, primFin, idFin, firmaFin);
      } */

  function ClearRecordFin() {
    document.getElementById("proektfin").value = '';
    document.getElementById("summafin").value = '';
    document.getElementById("priznakfin").value = '';
    document.getElementById("dateoplfin").value = '';
    document.getElementById("sffin").value = '';
    document.getElementById("primfin").value = '';
    document.getElementById("idfin").value = '';
    document.getElementById("firmafin").value = '';
    labelred();

  }

  function UpdateRecordFin(row_number_fin) {
    document.getElementById("update_button_fin" + row_number_fin).disabled = true;
    // var record_id = document.getElementById("up_record_id"+row_number_fin).value;
    var proektFin = document.getElementById("up_proektfin" + row_number_fin).value;
    var summaFin = document.getElementById("up_summafin" + row_number_fin).value;
    var priznakFin = document.getElementById("up_priznakfin" + row_number_fin).value;
    var dateoplFin = document.getElementById("up_dateoplfin" + row_number_fin).value;
    var sfFin = document.getElementById("up_sffin" + row_number_fin).value;
    var primFin = document.getElementById("up_primfin" + row_number_fin).value;
    var idFin = document.getElementById("up_idfin" + row_number_fin).value;
    var firmaFin = document.getElementById("up_firmafin" + row_number_fin).value;
    var sumIspolFin = document.getElementById("up_sumispolfin" + row_number_fin).value;
    var oplataIspolFin = document.getElementById("up_oplataispolfin" + row_number_fin).value;
    const checkBox = inputCheckboxChecked();

    google.script.run.withSuccessHandler(function (return_string) {
      $('.checkbox-finance input:checkbox').prop('checked', false);
      document.getElementById("update_button_fin" + row_number_fin).disabled = false;

    }).UpdateRecordFin(proektFin, summaFin, priznakFin, dateoplFin, sfFin, primFin, idFin, firmaFin, sumIspolFin, oplataIspolFin, checkBox);
  }

  // открытие полной таблицы финансов при загрузке окна (автооткрытие)
  searchMobile(btnTableFinance);

  $('#btnTableАFinance').click(btnTableFinance);

  function btnTableFinance() {
    $('#btnTableАFinance').prop("disabled", true);
    clearBtnTableFinance();
    $('<div id="div-data-tablefinance-spinner"></div><div id="div-data-table-finance"><div id="data-table-finance" </div>').appendTo('#div-data-tablefinance-row')
    $("#div-data-tablefinance-spinner").attr("tabindex", -1).focus();
    spinner('div-data-tablefinance-spinner')
    google.script.run.withSuccessHandler(showDataFinance).getDataTableFinance();
    //startTableFinance();
  };

  $('#clearBtnTableFinance').click(clearBtnTableFinance);

  function clearBtnTableFinance() {
    $('#clearBtnTableFinance').prop("disabled", true);
    $('#div-data-table-finance').remove();
    document.getElementById('btnSearchFinanceInfo').innerHTML = '';
    document.getElementById('btnSearchFinanceReestrInfo').innerHTML = '';
    document.getElementById('btnSearchFinanceJobInfo').innerHTML = '';
    document.querySelector('#summaFinsnce').innerHTML = '';
    $('#clearBtnTableFinance').prop("disabled", false);
  };

  function showDataFinance(dataArray) {
    const dataArrayProcessed = dataArray.map(x => [x[0], x[1], x[2], x[3], x[4], x[5], x[7]]);
    var result = "<table class='table mt-3 table-bordered table-hover table-line-selection' style='font-size:0.9em'>"
    // строим таблицу
    for (var i = 0; i < dataArrayProcessed.length; i++) {
      result += "<tr>";
      for (var j = 0; j < dataArrayProcessed[i].length; j++) {
        result += "<td>" + dataArrayProcessed[i][j] + "</td>";
      }
      result += "<td align=\"center\"><button type=\"button\" id=\"buttonModalFinance" + i + "\"  something= " + i + " class=\"btn btn-sm btn-light btnbtnfin\" data-bs-toggle=\"modal\" data-bs-target=\"#exampleModalFinance\"  />Edit</button></td>";
      result += "</tr>";
    }
    result += "</table>";
    var div = document.getElementById('data-table-finance');
    div.innerHTML = result;
    $('#data-table-finance').hide(); // скрытие таблицы при загрузке страницы
    $('#searchFinance').mouseup(() => {
      $('#data-table-finance').show();
      autoSearchOnOpen('#searchFinance');
    }).keyup(dataSearchFinance);// эмуляция отпускания кнопки, при щелчке поиск по таблице (автопоиск при открытии)



    tableLineSelection() //полосы в таблице
    clickTableFin();
    $('#btnTableАFinance').prop("disabled", false);
    autoSearchOnOpen('#searchFinance')
    $("#div-data-tablefinance-spinner").remove();


    // редактирование таблицы showDataFinance через модалку 
    $('.btnbtnfin').click(function () {
      const row = this.getAttribute('something')
      const allModal = dataArray[row]

      $('#exampleModalFinance').on('shown.bs.modal', () => {
        $('#proektfinModal').val(allModal[0])
        $('#summafinModal').val(strongToNumber(allModal[1]))// преобразование в число и удаление пробелов
        $('#priznakfinModal').val(allModal[2])
        $('#sffinModal').val(allModal[4])
        $('#idfinModal').val(allModal[6])
        $('#primfinModal').val(allModal[5])
        $('#firmafinModal').val(allModal[7])
        $('#financeModalLabel').html(+row + 100)
        if (allModal[3]) {
          $('#dateoplfinModal').val(formatDateYYYYtireMMtireDD(strongToDate(allModal[3]))) //формат даты
        } else {
          $('#dateoplfinModal').val('')
        }
      })
    })
  }

  // вставка дата вчера в модалке
  document.querySelector('#btnyYesterdayDateFinanceModal').addEventListener('click', () => {
    document.querySelector('#dateoplfinModal').value = (formatDateYYYYtireMMtireDD(new Date(Date.now() - 86400000)));
    document.querySelector('#dateoplfinModal').style.cssText = 'font-weight: bold';
  });
  // вставка дата сегодня в модалке
  document.querySelector('#btnyTodayDateFinanceModal').addEventListener('click', () => {
    document.querySelector('#dateoplfinModal').value = formatDateYYYYtireMMtireDD(new Date());
    document.querySelector('#dateoplfinModal').style.cssText = 'font-weight: bold';
  });

  // дата в модалке если заполненная, то жирным
  /*   if(document.querySelector('#dateoplfinModal').value) {
      document.querySelector('#dateoplfinModal').style.cssText = 'font-weight: bold';
    } else {
      document.querySelector('#dateoplfinModal').style.cssText = 'font-weight: normal';
    } */

  // отображение скрытие таблицы с учетом результатов поиска, если поле Ппоиска заполнено, показывает результаты ,если пусто, скрывает
  function dataSearchFinance() {
    if (this.value && this.value.length >= 3) {
      $('#data-table-finance').show();   // если в поле поиска нажимается клавиша, таблица отображается (с учетом поиска) 
    } else {
      $('#data-table-finance').hide();
    }
    summaTr()
  }

  function summaTr() {
    const trNone = document.querySelector('#data-table-finance');
    const trNone1 = getComputedStyle(trNone).display;
    const tr = document.querySelectorAll('#data-table-finance tr');
    const divSummaFinance = document.querySelector('#summaFinsnce')
    let sum = 0;
    if (trNone1 === 'none') {
      divSummaFinance.innerText = ``;
      return false
    }
    for (let i = 0; i < tr.length; i++) {
      if (tr[i].style.display != 'none') {
        sum += tr[i].getElementsByTagName("td")[1].innerText * 1;
      }
    }
    divSummaFinance.innerText = `Сумма: ${Math.round(sum).toFixed(2)} грн`;
  }

  // скрытие результатов поиска по нажатию на крестик инпута
  document.getElementById('searchFinance').addEventListener('input', dataSearchFinance);


  //кнопка сохранения в модальном окне
  $('#btnSaveModalFinance').on("click", btnSaveModalFinance)
  function btnSaveModalFinance() {
    const id = $('#idfinModal').val();
    const data = [[
      $('#proektfinModal').val(),
      $('#summafinModal').val() * 1,
      $('#priznakfinModal').val(),
      $('#dateoplfinModal').val(),
      $('#sffinModal').val(),
      $('#primfinModal').val(),
    ]];
    const checkBox = inputCheckboxChecked();
    $('.checkbox-finance input:checkbox').prop('checked', false);
    $('#exampleModalFinance').modal('hide');
    google.script.run.withSuccessHandler(() => {
      spinner('rowdatafin');
      ClearRecordFin();
      if ($('#sffinModal').val()) {
        SearchRecordsFin($('#sffinModal').val());
      } else {
        SearchRecordsFinProekt1($('#proektfinModal').val());
      }
    }).changesRowFinanceModal(id, data, checkBox);
  }

  $('#btnSearchFinance').click(function () {
    $('#btnSearchFinance').prop("disabled", true);
    SearchRecordsFin()
  })

  $('#btnClearSearchFinance').click(function () {
    $('#btnClearSearchFinance').prop("disabled", true);
    $('#rowdatafin').html('');
    $('#btnClearSearchFinance').prop("disabled", false);
    $('#btnSearchFinance').prop("disabled", false);
  })

  //возвращает текст из определенной колонки и номер колонки, записыает в кеш, потом вставляет из кеша
  function clickTableFin() {
    clickTables('#div-data-table-finance', clickTapHandlingFinance);
  }

  //обработка клика или тапа по таблице 
  function clickTapHandlingFinance(event) {
    if (event.target.tagName !== 'TD') return false;
    const dataTarget = event.target.textContent;
    const data = [...event.target.parentNode.children];
    const text = getDataFromTd(data);
    const col = event.srcElement.cellIndex;
    if (col === 7) return false;
    ClearRecordFin();
    switch (col) {
      case 0:
        $('#proektfin').val(text[0]);
        break;
      case 1:
        $('#summafin').val(text[1]);
        break;
      case 2:
        $('#priznakfin').val(text[2]);
        break;
      case 3:
        $('#dateoplfin').val(formatDateYYYYtireMMtireDD(strongToDate(text[3])));
        break;
      case 4:
        $('#sffin').val(text[4]);
        break;
      case 5:
        $('#primfin').val(text[5]);
        break;
      case 6:
        $('#firmafin').val(text[6]);
        break;
    }
    // вставка значения из кеша на кнопку и в поле поиска таблицы
    document.getElementById('btnSearchFinanceInfo').innerHTML = event.target.innerHTML;
    document.getElementById('btnSearchFinanceReestrInfo').innerHTML = 'reestr ' + text[0];
    document.getElementById('btnSearchFinanceJobInfo').innerHTML = 'job ' + text[0];
    document.getElementById('searchFinance').value = event.target.innerHTML;
  }

  //кнопка маленькая левая (finance)
  $('#btnSearchFinanceInfo').click(function () {
    SearchRecordsFin();
  })

  //перехват кнопки (finance с переходом)
  $('.btn-finance-transition').click(function () {
    $('#proektfin').val(numEndStrong(this.textContent));
    $('#searchFinance').val(numEndStrong(this.textContent));
    $('#nav-fin-tab')[0].click();
    labelred();
    autoSearchOnOpen('#searchFinance');
  })


  // кнопки Add R+ т Add R- (обработка кнопок)
  $('#add_button_fin button').click(function () {
   // if (!window.confirm('Добавить запись?')) return;
    const this_ = this
    const vatieButton = this_.innerText;
    this.disabled = true;
    const proektFin = document.getElementById("proektfin").value;
    let summaFin = document.getElementById("summafin").value;
    const priznakFin = document.getElementById("priznakfin").value;
    const dateoplFin = document.getElementById("dateoplfin").value;
    const sfFin = document.getElementById("sffin").value;
    const primFin = document.getElementById("primfin").value;
    const idFin = document.getElementById("idfin").value;
    const firmaFin = document.getElementById("firmafin").value;

    if (vatieButton === 'Add R-') summaFin = -summaFin;
    const checkBox = inputCheckboxChecked();
    //spinner('rowdatafin')
    google.script.run.withSuccessHandler(function (return_string) {
      //  document.getElementById("proektfin").value = proektFin;
      // SearchRecordsFinProekt();
      $('.checkbox-finance input:checkbox').prop('checked', false);
      this_.disabled = false;
    }).AddRecordFin(proektFin, summaFin, priznakFin, dateoplFin, sfFin, primFin, idFin, firmaFin, checkBox);
  });


  // кнопка Update (обработка кнопок)
  function updateRecordFinButton() {
    const elem = document.querySelectorAll('.btn-update-fin');

    for (let i = 0; i < elem.length; i++) {
      elem[i].addEventListener('click', function () {
        UpdateRecordFin(parseInt(document.activeElement.id.replace(/[^\d]/g, '')));
      })
    }
  }

  /// обработка, когда выбираются оба флажка
  // Только один отмеченный чекбокс
  // Radio button из chexbox, при выборе одного чекбокса все остальные снимаются.
  function doubleCheck() {
    $('.checkbox-finance input:checkbox').click(function () {
      if ($(this).is(':checked')) {
        $('.checkbox-finance input:checkbox').not(this).prop('checked', false);
      }
    });
  }
  doubleCheck();

  //обход чекбоксов и определение клика
  function inputCheckboxChecked() {
    // const valueInput = document.getElementsByTagName('input');
    // const valueCheckbox = valueInput.querySelectorAll('[type=checkbox]')
    const value = $("input:checkbox");

    for (let i = 0; i < value.length; i++) {
      if (value[i].checked) {
        return value[i].value;

      }
    }
  }

  // кнопки + и - (обработка кнопок)
  $('#buttonModalFinanceMultiple button').click(function () {
    // if (!window.confirm('Добавить запись?')) return;
    const this_ = this
    const vatieButton = this_.innerText;
    this.disabled = true;   
    let array = serializeFormV2('formFinStart');
    if (vatieButton === '-') array[1] = -array[1];
    this_.disabled = false;
  });



  //будуємо "велику модалку"
  //document.querySelector().onclick


  /*   function StrongMultipleNext() {
      return `
      
              
                <div class="row g-1 mt-1">
                  <div class="col-2">
                    <div class="form">
                      <label for="proektfin">Проект</label>
                      <input type="number" id="proektfin" list="proektfin-datalist"
                        class="form-control form-control-sm form-font input-paste-finance" />
                      <datalist id="proektfin-datalist"></datalist>
                    </div>
                  </div>
            
                  <div class="col-2">
                    <div class="form">
                      <label for="summafin">Сумма</label>
                      <input type="number" id="summafin" class="form-control form-control-sm" />
                    </div>
                  </div>
            
                  <div class="col-1">
                    <div class="form">
                      <label for="priznakfin">Признак</label>
                      <input type="text" id="priznakfin" list="priznakfin-datalist" class="form-control form-control-sm" />
                      <datalist id="priznakfin-datalist"></datalist>
                    </div>
                  </div>
            
                  <div class="col-2">
                    <div class="form">
                      <label for="dateoplfin">Дата оплаты</label>
                      <input type="date" id="dateoplfin" class="form-control form-control-sm" />
                    </div>
                  </div>
            
                  <div class="col">
                    <div class="form">
                      <label for="primfin">Примечание</label>
                      <input type="text" id="primfin" list="primfin-datalist" class="form-control form-control-sm" />
                      <datalist id="primfin-datalist"></datalist>
                    </div>
                  </div>
            
                </div>
                <div class="row g-1 mt-1 checkbox-finance">
                  <div class="col-md-auto">
                    <div class="form-check">
                      <span class="check-style"></span>
                      <label for="issuepartfinance" class="form-check-label">Выставлено частично</label>
                      <input type="checkbox" id="issuepartfinance" class="form-check-input" value="part" />
                    </div>
                  </div>
                  <div class="col-md-auto">
                    <div class="form-check">
                      <span class="check-style"></span>
                      <label for="issuecompletfinance" class="form-check-label">Выставлено полностью</label>
                      <input type="checkbox" id="issuecompletfinance" class="form-check-input" value="complet" />
                    </div>
                  </div>
                  <div class="col-md-auto">
                    <div class="form-check">
                      <span class="check-style"></span>
                      <label for="ispolufinance" class="form-check-label">Исполу</label>
                      <input type="checkbox" id="ispolufinance" class="form-check-input" value="ispolu" />
                    </div>
                  </div>
                    
                 <div class="col ">
                     <button type="button" class="btn btn-light btn-sm float-md-end btn-multiple-next">+</button>
                  </div>
                <hr>              
             
            `;
  
  
    }
    const uuu = () => {
      document.querySelector('.modal-body-multiple-1').innerHTML = StrongMultipleNext();
      document.querySelector('.modal-body-multiple').innerHTML = StrongMultipleNext();
    }
   
    document.querySelector('#buttonModalFinanceMultiple').onclick = () => {
      uuu();
      document.querySelectorAll('.btn-multiple-next').onclick = function () {
        console.log(111111111111111111);
        
      //  document.querySelector('.strong-multiple-next').innerHTML = StrongMultipleNext();
       for(i = 0; i < document.querySelectorAll('.btn-multiple-next').length; i++) {
      console.log(document.querySelector('.btn-multiple-next')[i]);
      } 
      const node = this;
      console.log(node);
      console.log(document.querySelectorAll('.btn-multiple-next').length);
  
    };
      
    } */


  /*  document.querySelector('.11111111111111111111').innerHTML = `
                   <button type="button" class="btn btn-light btn-sm float-md-end btn-multiple-next">+</button>
                 `; */












</script>