<script>

  class FinanceFormBuilder {

    constructor(name, templateSelector, containerSelector) {
      this.name = name;
      this.templateSelector = templateSelector;
      this.containerSelector = containerSelector;
      this.template = document.querySelector(templateSelector);
      this.container = document.querySelector(containerSelector);
    }

    build() {
      if (this.template && this.container) {
        const clone = this.template.content.cloneNode(true);
        this.container.appendChild(clone);
        if (this.name != 'finance') {
          this.addIdToElements('input, select, datalist, button');
        }
        this.addClassToForm();
        const instance = new FormDataFromTables(`.form-fin-start-${this.name}`);

        // вішаємо подію на кнопку  Clear Record
        this.buttonsClearFinanceEvents(instance);

      } else {
        console.error('Template or container not found');
      }
    }

    none() {
      if (this.container) {
        this.container.innerHTML = '';
      } else {
        console.error('Template or container not found');
      }
    }

    addIdToElements(elements) {
      const collection = this.container.querySelectorAll(elements);
      collection.forEach((element, index) => {
        if (element.id) {
          const id = `${element.id}-${this.name}`;
          element.id = id;
          if (element.tagName == 'INPUT' || element.tagName == 'SELECT') {
            const label = element.previousElementSibling;
            if (label) label.htmlFor = id;
          }
        }
      });
    }

    //add ID to input and label
    /*     addIdToInput() {
          const inputCollection = this.container.querySelectorAll('input, select');
          inputCollection.forEach((input, index) => {
            const id = `${input.id}-${this.name}`;
            input.id = id;
            const label = input.previousElementSibling;
            if (label) label.htmlFor = id;
          });
        } */

    // add class to element "form"
    addClassToForm() {
      const elementForm = this.container.querySelector('form');
      const elementFormClassList = elementForm.classList.toString();
      elementForm.classList.add(`${elementFormClassList}-${this.name}`);
    }

    //add class to element "datalist"
    /*     addIdToDatalist() {
          const datalistCollection = this.container.querySelectorAll('datalist');
          datalistCollection.forEach((datalist, index) => {
            const id = `${datalist.id}-${this.name}`;
            datalist.id = id;
          });
        } */

    //події на кнопках
    buttonsClearFinanceEvents(instance) {
      let btnClearFinanceId = '#btnClearFinance'
      if (this.name != 'finance') {
        btnClearFinanceId = `#btnClearFinance-${this.name}`;
      }
      this.container.querySelector(btnClearFinanceId).addEventListener('click', () => instance.clearRecords());
    }
  
    buttonsMultipleFinancePlusMinus() {}
  }

 </script>