<script>
  /**
  * Клас для маніпуляції з формами
  */

  class FormDataFromTables {
    constructor(formId) {
      this.$form = document.querySelector(formId);

      this.#setup();

    }

    #setup() {
      this.$form.addEventListener('input', this.labelred);
      this.$inputs = this.$form.querySelectorAll('input');
      this.$labels = this.$form.querySelectorAll('label');

      this.labelred = this.#labelred.bind(this);
      this.clearRecords = this.clearRecords.bind(this);
      this.clearInputClickLabel = this.#clearInputClickLabel.bind(this);

      this.$labels.forEach(element => element.addEventListener('click', this.clearInputClickLabel));
      document.querySelectorAll('.btn-clear-form-all').forEach(element => {
        element.addEventListener('click', this.clearRecords);
      });
    }

    /**
    * Функція очистки полів форми. Також міняє колір лабела на чорний
    */
    clearRecords() {
      this.$form.reset();
      this.#labelred();
    }

    /**
    * Функція робить лабел червоним, якщо інпут заповнений і чорним, якщо ні.
    */
    #labelred() {
      this.$inputs.forEach(element => {
        const $labels = this.$form.querySelector(`[for="${element.id}"]`);
        if (element.value && element.getAttribute('type') != 'checkbox') {
          $labels.style.color = '#dc3545';
        } else {
          $labels.style.color = '';
        }
      });
    }

    /**
    * Функція очистки inputa кліком по label і видалення червоної розфарбовки полів форми.
    */
    #clearInputClickLabel(e) {
      e.target.removeAttribute('style');
      const id = e.target.getAttribute('for');
      if (!id) return;
      document.getElementById(id).value = '';
    }

    /**
    * Функція збирає всі дані інпутів в об'єкт, масив даних, масив ключів.
    */
    formaDataObj() {
      const isCheckboxOrRadio = type => ['checkbox', 'radio'].includes(type);
      const { elements } = this.$form;
      const values = {};
      for (let i = 0; i < elements.length; i++) {
        const formElement = elements[i];
        const { name } = formElement;
        if (name) {
          const { value, type, checked } = formElement;
          values[name] = isCheckboxOrRadio(type) ? checked : value;
        }
      }
      return values
    }

  }















</script>